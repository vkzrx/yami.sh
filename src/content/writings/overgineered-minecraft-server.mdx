---
layout: ../../layouts/writing.astro
title: "Mined"
description: "An overengineered Minecraft server"
author: Yami
date: 2023-10-10
draft: false
tags:
  - Minecraft
  - Golang
  - Cloud
---

Minecraft is one of those games I played hundreds of hours during highschool and college. Building my own base to protect myself from zombies, mining hours to find enough diamonds to craft equipments that I end up losing after falling in lava, going on expedition in other dimensions, and fighting the Ender dragon, are things I had a lot of fun to do.

Surely, lots of memories of those nights with friends on [Mumble](https://www.mumble.info) playing on a Minecraft server powered by [Hamachi](https://vpn.net) often arise, even 10 years later.

As I was looking to learn about networking I was wondering what it would take to run my own multiplayer Minecraft server today. I already did it years ago so I could wrap it up in a week-end, isn't it? A classic I sometimes tell myself. In a sense it is but expectations have evolved making me want to build something more advanced. And curiosity often leads to new paths.

## Foundations

A Minecraft server is no different than most systems we use everyday. It's simply a server running on a `port` (by default 25565) that can be exposed so people can connect to it to join your world.

![basic](/assets/images/basic.png)

There are multiple implementations available, the [official](https://www.minecraft.net/en-us/download/server) one if you want to make sure to always have the latest updates. Or others like [Paper](https://papermc.io/software/paper), [Purpur](https://purpurmc.org) or [Fabric](https://fabricmc.net) that are more focused on performance and modding, but often fall a few versions behind the official one.

## It works on my machine

The easiest way to have a multiplayer server (and for free) is to turn your own machine into a Minecraft server. Simply download a server implementation like [Paper](https://papermc.io/software/paper), run it, configure your firewall to allow tcp connections on port **25565**, forward it and share your IP address with friends. You can now be Christophe Colomb and discover the world together!

But before setting sails, it's good to know it comes with some drawbacks. Your IP address is probably dynamic so keeping track of it or configuring your router to make it static may be required. Your internet connection should be strong enough to support everyone or your friends will not like you. Exposing yourself to the world comes with great responsibility. And one image to sum up the most annoying one.

![it's a server](/assets/images/its-a-server.png)

One tool I find very convenient to expose anything running locally is [ngrok](https://ngrok.com). One simple command and your server is available to join from anywhere without the need to configure your firewall and port forwarding.

```sh
$ ngrok tcp 25565
```

Then share the generated URL with your friends and you're good to go. As cool as it is, it still requires you to have your computer always running.

## The cloud

One could argue that running your server in a Raspberry Pi is a good alternative but given how demanding Minecraft can be sometimes, it could be a lot of hassle to maintain. Fully managed platforms like [Pufferfish](https://pufferfish.host), [Bisect](https://www.bisecthosting.com) or [Aternos](aternos.org) are also good choices if you just want to play. But here we'll go the hard (and fun!) way of creating our own platform.

Running your server in the cloud is another way. You are basically spinning up a computer that can be scaled up or scaled down as needed. However, don't be lured into its childish look but Minecraft is very CPU intensive, yeah those blocks are actually not very light and become really heavy the more players you have on your server, especially when they are going in separate directions.

The recommended system requirements for 3-5 players would be around 2GB of RAM and 2 CPU cores.
